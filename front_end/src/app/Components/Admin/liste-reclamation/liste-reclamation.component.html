<div class="card">
    <div class="card-body">
      <h2 class="card-title text-center mb-4">Liste des réclamations</h2>
      <div class="table-responsive">
        <table class="table table-bordered table-striped align-middle">
          <thead class="bg-light">
            <tr>
                <th scope="col">Date de création</th>
                <th scope="col">Titre</th>
                <th scope="col">Nom de PS</th>
                <th scope="col">Status</th>
                <th scope="col">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let reclamation of reclamations">
                <td>{{ reclamation.dateCreation }}</td>
                <td>{{ reclamation.titre }}</td>
                <td>{{ reclamation.user?.nom }} {{ reclamation.user?.prenom }}</td>
                <td>{{ reclamation.statut }}</td>
                <td>
                <button class="btn btn-info" (click)="viewReclamationDetails(reclamation)" data-bs-toggle="modal" data-bs-target="#viewReclamationModal">
                  <i class="fas fa-eye"></i> Voir
                </button>
                <button class="btn btn-warning" (click)="viewReclamationDetails(reclamation)" data-bs-toggle="modal" data-bs-target="#updateStatusModal">
                  <i class="fas fa-edit"></i> Modifier Statut
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <!-- Modale de visualisation des détails de la réclamation -->
  <div class="modal fade" id="viewReclamationModal" tabindex="-1" aria-labelledby="viewReclamationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="viewReclamationModalLabel">Détails de la Réclamation</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" *ngIf="selectedReclamation">
          <p><strong>Titre:</strong> {{ selectedReclamation.titre }}</p>
          <p><strong>Description:</strong> {{ selectedReclamation.description }}</p>
          <p><strong>Date de création:</strong> {{ selectedReclamation.dateCreation }}</p>
          <p><strong>Status:</strong> {{ selectedReclamation.statut }}</p>
         
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modale de mise à jour du statut -->
  <div class="modal fade" id="updateStatusModal" tabindex="-1" aria-labelledby="updateStatusModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="updateStatusModalLabel">Modifier le Statut de la Réclamation</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form [formGroup]="statusForm" (ngSubmit)="updateStatus()">
            <div class="mb-3">
              <label for="status" class="form-label">Nouveau Statut</label>
              <select id="status" class="form-control" formControlName="status">
                <option *ngFor="let status of statusList" [value]="status">{{ status }}</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary" [disabled]="statusForm.invalid">Mettre à jour</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  