<section class="h-100">
  <div class="container h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col">
        <div class="card card-registration my-4">
          <div class="row g-0">
            <div class="col-xl-10">
              <div class="card-body p-md-5 text-black">
                <h3 class="mb-5 text-uppercase register">ajouter compte ps</h3>
                <form [formGroup]="psForm" (ngSubmit)="onSubmit()">
                  <div class="row">
                    <!-- Email -->
                    <div class="col-md-4 mb-4">
                      <div class="form-outline">
                        <input
                          type="email"
                          id="form3Example1m"
                          class="form-control form-control-lg"
                          formControlName="email"
                        />
                        <label class="form-label" for="form3Example1m"
                          >Email</label
                        >
                        <div
                          *ngIf="
                            psForm.get('email')?.hasError('required') &&
                            psForm.get('email').touched
                          "
                          class="text-danger"
                        >
                          Email est obligatoire
                        </div>
                        <div
                          *ngIf="
                            psForm.get('email')?.hasError('email') &&
                            psForm.get('email').touched
                          "
                          class="text-danger"
                        >
                          Entrez un mail valide
                        </div>
                      </div>
                    </div>
                    <!-- Nom -->
                    <div class="col-md-4 mb-4">
                      <div class="form-outline">
                        <input
                          type="text"
                          id="form3Example1n"
                          class="form-control form-control-lg"
                          formControlName="nom"
                        />
                        <label class="form-label" for="form3Example1n"
                          >Nom</label
                        >
                        <div
                          *ngIf="
                            psForm.get('nom')?.hasError('required') &&
                            psForm.get('nom')?.touched
                          "
                          class="text-danger"
                        >
                          Nom est obligatoire
                        </div>
                        <div
                          *ngIf="
                            psForm.get('nom')?.hasError('pattern') &&
                            psForm.get('nom')?.touched
                          "
                          class="text-danger"
                        >
                          Nom doit contenir seulement des lettres
                        </div>
                      </div>
                    </div>
                    <!-- Prenom -->
                    <div class="col-md-4 mb-4">
                      <div class="form-outline">
                        <input
                          type="text"
                          id="form3Example1n"
                          class="form-control form-control-lg"
                          formControlName="prenom"
                        />
                        <label class="form-label" for="form3Example1n"
                          >Prénom</label
                        >
                        <div
                          *ngIf="
                            psForm.get('prenom')?.hasError('required') &&
                            psForm.get('prenom')?.touched
                          "
                          class="text-danger"
                        >
                          Prénom est obligatoire
                        </div>
                        <div
                          *ngIf="
                            psForm.get('prenom')?.hasError('pattern') &&
                            psForm.get('prenom')?.touched
                          "
                          class="text-danger"
                        >
                          Prénom doit contenir seulement des lettres
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <!-- Password -->
                    <div class="col-md-6 mb-4">
                      <div class="form-outline">
                        <input
                          type="password"
                          id="form3Example1m"
                          class="form-control form-control-lg"
                          formControlName="password"
                        />
                        <label class="form-label" for="form3Example1m"
                          >Mot de passe</label
                        >
                        <div
                          *ngIf="
                            psForm.get('password').hasError('required') &&
                            psForm.get('password').touched
                          "
                          class="text-danger"
                        >
                          Mot de passe est obligatoire
                        </div>
                        <div
                          *ngIf="
                            psForm.get('password').hasError('minlength') &&
                            psForm.get('password').touched
                          "
                          class="text-danger"
                        >
                          Mot de passe doit contenir au moins 6 caractères
                        </div>
                      </div>
                    </div>
                    <!-- Repeat Password -->
                    <div class="col-md-6 mb-4">
                      <div class="form-outline">
                        <input
                          type="password"
                          id="form3Example1n"
                          class="form-control form-control-lg"
                          formControlName="repeatPassword"
                        />
                        <label class="form-label" for="form3Example1n"
                          >Répéter le mot de passe</label
                        >
                        <div
                          *ngIf="
                            psForm.get('repeatPassword').hasError('required') &&
                            psForm.get('repeatPassword').touched
                          "
                          class="text-danger"
                        >
                          Confirmation du mot de passe est obligatoire
                        </div>
                        <div
                          *ngIf="
                            psForm
                              .get('repeatPassword')
                              .hasError('minlength') &&
                            psForm.get('repeatPassword').touched
                          "
                          class="text-danger"
                        >
                          Confirmation du mot de passe doit contenir au moins 6
                          caractères
                        </div>
                        <div
                          *ngIf="
                            psForm.get('repeatPassword').hasError('mismatch')
                          "
                          class="text-danger"
                        >
                          Les mots de passe ne correspondent pas
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <!-- Matricule -->
                    <div class="col-md-4 mb-4">
                      <div class="form-outline">
                        <input
                          type="text"
                          id="form3Example1m"
                          class="form-control form-control-lg"
                          formControlName="matricule"
                        />
                        <label class="form-label" for="form3Example1m"
                          >Matricule</label
                        >
                        <div
                          *ngIf="
                            psForm.get('matricule')?.hasError('required') &&
                            psForm.get('matricule')?.touched
                          "
                          class="text-danger"
                        >
                          Matricule est obligatoire
                        </div>
                      </div>
                    </div>
                    <!-- Tel -->
                    <div class="col-md-4 mb-4">
                      <div class="form-outline">
                        <input
                          type="text"
                          id="form3Example1n"
                          class="form-control form-control-lg"
                          formControlName="tel"
                        />
                        <label class="form-label" for="form3Example1n"
                          >Téléphone</label
                        >
                        <div
                          *ngIf="
                            psForm.get('tel')?.hasError('required') &&
                            psForm.get('tel')?.touched
                          "
                          class="text-danger"
                        >
                          Téléphone est obligatoire
                        </div>
                        <div
                          *ngIf="
                            psForm.get('tel')?.hasError('pattern') &&
                            psForm.get('tel')?.touched
                          "
                          class="text-danger"
                        >
                          Téléphone doit contenir seulement des nombres
                        </div>
                      </div>
                    </div>
                    <!-- Adresse -->
                    <div class="col-md-4 mb-4">
                      <div class="form-outline">
                        <input
                          type="text"
                          id="form3Example1n"
                          class="form-control form-control-lg"
                          formControlName="adresse"
                        />
                        <label class="form-label" for="form3Example1n"
                          >Adresse</label
                        >
                        <div
                          *ngIf="
                            psForm.get('adresse')?.hasError('required') &&
                            psForm.get('adresse')?.touched
                          "
                          class="text-danger"
                        >
                          Adresse est obligatoire
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <!-- Identite Bancaire -->
                    <div class="col-md-6 mb-4">
                      <div class="form-outline">
                        <input
                          type="text"
                          id="form3Example1m"
                          class="form-control form-control-lg"
                          formControlName="identiteBancaire"
                        />
                        <label class="form-label" for="form3Example1m"
                          >Identité bancaire</label
                        >
                        <div
                          *ngIf="
                            psForm
                              .get('identiteBancaire')
                              ?.hasError('required') &&
                            psForm.get('identiteBancaire')?.touched
                          "
                          class="text-danger"
                        >
                          Identité bancaire est obligatoire
                        </div>
                      </div>
                    </div>
                    <!-- Role -->
                    <div class="col-md-6 mb-4">
                      <div class="form-outline">
                        <select
                          class="form-select form-control-lg"
                          formControlName="role"
                        >
                          <option *ngFor="let role of roles" [value]="role">
                            {{ role }}
                          </option>
                        </select>
                        <label class="form-label" for="form3Example1m"
                          >Rôle</label
                        >
                      </div>
                    </div>
                  </div>

                  <div class="d-flex justify-content-end pt-3">
                    <button
                    type="submit"
                    class="btn color btn-lg ms-2"
                    [disabled]="psForm.invalid || isLoading" 
                  >
                    <span *ngIf="!isLoading">Submit</span> 
                    <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> 
                  </button>
                  
                    <button
                      type="button"
                      class="btn btn-warning btn-lg ms-2"
                      (click)="onrest()"
                    >
                      Reset
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
